{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\saran\\\\Downloads\\\\InnovateHub2\\\\frontend\\\\src\\\\components\\\\AdminActivityProfile.js\",\n  _s = $RefreshSig$();\nimport { useParams } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { Bar, Pie } from \"react-chartjs-2\";\nimport \"./AdminActivityProfile.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AdminActivityProfile() {\n  _s();\n  const {\n    activity,\n    role,\n    id\n  } = useParams();\n  const [profile, setProfile] = useState(null);\n  const [records, setRecords] = useState([]);\n  useEffect(() => {\n    axios.get(`/api/admin/activity/${activity}/${role}/${id}`).then(res => {\n      setProfile(res.data.profile);\n      setRecords(res.data.records);\n    }).catch(console.error);\n  }, [activity, role, id]);\n  if (!profile) return /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"loading\",\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 22,\n    columnNumber: 24\n  }, this);\n\n  /* EXPORT CSV */\n  const exportCSV = () => {\n    const rows = [Object.keys(records[0]).join(\",\"), ...records.map(r => Object.values(r).join(\",\"))];\n    const blob = new Blob([rows.join(\"\\n\")], {\n      type: \"text/csv\"\n    });\n    const link = document.createElement(\"a\");\n    link.href = URL.createObjectURL(blob);\n    link.download = `${activity}_${profile.name}.csv`;\n    link.click();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"activity-profile\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: profile.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: role === \"student\" ? `${profile.department} 路 Year ${profile.year}` : `${profile.designation} 路 ${profile.department}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"metrics\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Total \", activity, \": \", /*#__PURE__*/_jsxDEV(\"b\", {\n          children: records.length\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 34\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"charts\",\n      children: /*#__PURE__*/_jsxDEV(Bar, {\n        data: {\n          labels: [\"Submitted\"],\n          datasets: [{\n            label: activity.toUpperCase(),\n            data: [records.length],\n            backgroundColor: \"#2563eb\"\n          }]\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"table-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"table-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [activity.toUpperCase(), \" DETAILS\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: exportCSV,\n          children: \"Export CSV\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [records.length > 0 && Object.keys(records[0]).filter(k => ![\"_id\", \"ownerId\", \"ownerRole\"].includes(k)).map(k => /*#__PURE__*/_jsxDEV(\"th\", {\n              children: k\n            }, k, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 33\n            }, this)), activity === \"research\" && /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"PDF\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 45\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: records.map(r => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [Object.keys(r).filter(k => ![\"_id\", \"ownerId\", \"ownerRole\"].includes(k)).map(k => /*#__PURE__*/_jsxDEV(\"td\", {\n              children: String(r[k])\n            }, k, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 23\n            }, this)), activity === \"research\" && /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                href: `/uploads/${r.paperPdf}`,\n                download: true,\n                children: \"Download\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 21\n            }, this)]\n          }, r._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 7\n  }, this);\n}\n_s(AdminActivityProfile, \"GBhjECGK/NMyS2vG5ICe/C0q9zc=\", false, function () {\n  return [useParams];\n});\n_c = AdminActivityProfile;\nvar _c;\n$RefreshReg$(_c, \"AdminActivityProfile\");","map":{"version":3,"names":["useParams","useEffect","useState","axios","Bar","Pie","jsxDEV","_jsxDEV","AdminActivityProfile","_s","activity","role","id","profile","setProfile","records","setRecords","get","then","res","data","catch","console","error","className","children","fileName","_jsxFileName","lineNumber","columnNumber","exportCSV","rows","Object","keys","join","map","r","values","blob","Blob","type","link","document","createElement","href","URL","createObjectURL","download","name","click","department","year","designation","length","labels","datasets","label","toUpperCase","backgroundColor","onClick","filter","k","includes","String","paperPdf","_id","_c","$RefreshReg$"],"sources":["C:/Users/saran/Downloads/InnovateHub2/frontend/src/components/AdminActivityProfile.js"],"sourcesContent":["import { useParams } from \"react-router-dom\";\r\nimport { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Bar, Pie } from \"react-chartjs-2\";\r\nimport \"./AdminActivityProfile.css\";\r\n\r\nexport default function AdminActivityProfile() {\r\n  const { activity, role, id } = useParams();\r\n  const [profile, setProfile] = useState(null);\r\n  const [records, setRecords] = useState([]);\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(`/api/admin/activity/${activity}/${role}/${id}`)\r\n      .then((res) => {\r\n        setProfile(res.data.profile);\r\n        setRecords(res.data.records);\r\n      })\r\n      .catch(console.error);\r\n  }, [activity, role, id]);\r\n\r\n  if (!profile) return <p className=\"loading\">Loading...</p>;\r\n\r\n  /* EXPORT CSV */\r\n  const exportCSV = () => {\r\n    const rows = [\r\n      Object.keys(records[0]).join(\",\"),\r\n      ...records.map((r) => Object.values(r).join(\",\")),\r\n    ];\r\n    const blob = new Blob([rows.join(\"\\n\")], { type: \"text/csv\" });\r\n    const link = document.createElement(\"a\");\r\n    link.href = URL.createObjectURL(blob);\r\n    link.download = `${activity}_${profile.name}.csv`;\r\n    link.click();\r\n  };\r\n\r\n  return (\r\n      <div className=\"activity-profile\">\r\n\r\n        {/* HEADER */}\r\n        <div className=\"profile-header\">\r\n          <h2>{profile.name}</h2>\r\n          <p>\r\n            {role === \"student\"\r\n              ? `${profile.department} 路 Year ${profile.year}`\r\n              : `${profile.designation} 路 ${profile.department}`}\r\n          </p>\r\n        </div>\r\n\r\n        {/* METRICS */}\r\n        <div className=\"metrics\">\r\n          <div>Total {activity}: <b>{records.length}</b></div>\r\n        </div>\r\n\r\n        {/* CHART */}\r\n        <div className=\"charts\">\r\n          <Bar\r\n            data={{\r\n              labels: [\"Submitted\"],\r\n              datasets: [{\r\n                label: activity.toUpperCase(),\r\n                data: [records.length],\r\n                backgroundColor: \"#2563eb\",\r\n              }],\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        {/* TABLE */}\r\n        <div className=\"table-card\">\r\n          <div className=\"table-header\">\r\n            <h3>{activity.toUpperCase()} DETAILS</h3>\r\n            <button onClick={exportCSV}>Export CSV</button>\r\n          </div>\r\n\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                {records.length > 0 &&\r\n                  Object.keys(records[0])\r\n                    .filter((k) => ![\"_id\", \"ownerId\", \"ownerRole\"].includes(k))\r\n                    .map((k) => <th key={k}>{k}</th>)}\r\n                {activity === \"research\" && <th>PDF</th>}\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              {records.map((r) => (\r\n                <tr key={r._id}>\r\n                  {Object.keys(r)\r\n                    .filter((k) => ![\"_id\", \"ownerId\", \"ownerRole\"].includes(k))\r\n                    .map((k) => (\r\n                      <td key={k}>{String(r[k])}</td>\r\n                    ))}\r\n                  {activity === \"research\" && (\r\n                    <td>\r\n                      <a href={`/uploads/${r.paperPdf}`} download>\r\n                        Download\r\n                      </a>\r\n                    </td>\r\n                  )}\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n      </div>\r\n    \r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}