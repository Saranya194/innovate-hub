{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\saran\\\\Downloads\\\\InnovateHub2\\\\frontend\\\\src\\\\components\\\\FaceVerifyModal.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState, useEffect } from \"react\";\nimport Webcam from \"react-webcam\";\nimport * as faceapi from \"face-api.js\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function FaceVerifyModal({\n  onSuccess,\n  onClose\n}) {\n  _s();\n  const webcamRef = useRef(null);\n  const [error, setError] = useState(\"\");\n  useEffect(() => {\n    Promise.all([faceapi.nets.tinyFaceDetector.loadFromUri(\"/models\"), faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\"), faceapi.nets.faceRecognitionNet.loadFromUri(\"/models\")]);\n  }, []);\n  const verifyFace = async () => {\n    setError(\"\");\n    const imgSrc = webcamRef.current.getScreenshot();\n    const img = new Image();\n    img.src = imgSrc;\n    img.onload = async () => {\n      const detections = await faceapi.detectAllFaces(img, new faceapi.TinyFaceDetectorOptions()).withFaceDescriptors();\n      if (detections.length !== 1) {\n        setError(\"Only one face must be visible\");\n        return;\n      }\n      try {\n        await axios.post(\"/api/face/verify\", {\n          currentDescriptor: Array.from(detections[0].descriptor)\n        });\n        onSuccess(); // ✅ VERIFIED\n      } catch {\n        setError(\"Face does not match registration\");\n      }\n    };\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal-overlay\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-box\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Face Verification\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Webcam, {\n        ref: webcamRef,\n        screenshotFormat: \"image/jpeg\",\n        className: \"face-webcam\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: verifyFace,\n        children: \"Capture & Verify\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"cancel\",\n        onClick: onClose,\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n_s(FaceVerifyModal, \"25dPH5Fcn7G9O2Gw839ydb3iiC8=\");\n_c = FaceVerifyModal;\nvar _c;\n$RefreshReg$(_c, \"FaceVerifyModal\");","map":{"version":3,"names":["React","useRef","useState","useEffect","Webcam","faceapi","axios","jsxDEV","_jsxDEV","FaceVerifyModal","onSuccess","onClose","_s","webcamRef","error","setError","Promise","all","nets","tinyFaceDetector","loadFromUri","faceLandmark68Net","faceRecognitionNet","verifyFace","imgSrc","current","getScreenshot","img","Image","src","onload","detections","detectAllFaces","TinyFaceDetectorOptions","withFaceDescriptors","length","post","currentDescriptor","Array","from","descriptor","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","screenshotFormat","onClick","_c","$RefreshReg$"],"sources":["C:/Users/saran/Downloads/InnovateHub2/frontend/src/components/FaceVerifyModal.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\r\nimport Webcam from \"react-webcam\";\r\nimport * as faceapi from \"face-api.js\";\r\nimport axios from \"axios\";\r\n\r\nexport default function FaceVerifyModal({ onSuccess, onClose }) {\r\n  const webcamRef = useRef(null);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    Promise.all([\r\n      faceapi.nets.tinyFaceDetector.loadFromUri(\"/models\"),\r\n      faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\"),\r\n      faceapi.nets.faceRecognitionNet.loadFromUri(\"/models\"),\r\n    ]);\r\n  }, []);\r\n\r\n  const verifyFace = async () => {\r\n    setError(\"\");\r\n\r\n    const imgSrc = webcamRef.current.getScreenshot();\r\n    const img = new Image();\r\n    img.src = imgSrc;\r\n\r\n    img.onload = async () => {\r\n      const detections = await faceapi\r\n        .detectAllFaces(img, new faceapi.TinyFaceDetectorOptions())\r\n        .withFaceDescriptors();\r\n\r\n      if (detections.length !== 1) {\r\n        setError(\"Only one face must be visible\");\r\n        return;\r\n      }\r\n\r\n      try {\r\n        await axios.post(\"/api/face/verify\", {\r\n          currentDescriptor: Array.from(detections[0].descriptor),\r\n        });\r\n\r\n        onSuccess(); // ✅ VERIFIED\r\n      } catch {\r\n        setError(\"Face does not match registration\");\r\n      }\r\n    };\r\n  };\r\n\r\n  return (\r\n    <div className=\"modal-overlay\">\r\n      <div className=\"modal-box\">\r\n        <h3>Face Verification</h3>\r\n\r\n        <Webcam\r\n          ref={webcamRef}\r\n          screenshotFormat=\"image/jpeg\"\r\n          className=\"face-webcam\"\r\n        />\r\n\r\n        {error && <p className=\"error\">{error}</p>}\r\n\r\n        <button onClick={verifyFace}>Capture & Verify</button>\r\n        <button className=\"cancel\" onClick={onClose}>Cancel</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}